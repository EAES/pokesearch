<!-- loading -->
<div ng-if="!pokemon && !serviceError" class="messages">
  <img src="assets/images/loader.gif" />
  <p>Loading...</p>
</div>

<!-- error -->
<p class="bg-warning" ng-if="serviceError">{{ serviceError }}</p>

<!-- content -->
<div ng-if="pokemon" class="row">
	
	<section id="main-pokemon" class="col-xs-5">
		<h3>#{{ pokemon.id | numLength:3}}</h3>

		<img id="pokemon-art" ng-src="assets/pokemon/{{pokemon.id}}.png" />

		<div id="types">
			<i class="type {{ types.type.name }}" ng-repeat="types in pokemon.types">
				{{types.type.name}}
			</i>
		</div>
	</section>

	<section id="base-stats" class="col-xs-7">
		<h3>Base Stats</h3>
		<ul id="base-stats">
			<li ng-repeat="stats in pokemon.stats | orderBy:'-'" class="{{stats.stat.name}}">
				<div class="stat-title">{{stats.stat.name}}:</div>
				<span class="stat-no"> {{stats.base_stat}} </span>
				<div class="stat-bar" style="width:{{stats.base_stat}}px;"></div>
			</li>
		</ul>
	</section>
	
	<section id="evolution-chain" class="col-xs-12">
			<h3>Evolution Chain</h3>
			
			<!-- loader -->
			<div ng-if="pokemonEvoChain == '' " class="messages">
			  <img src="assets/images/loader.gif" />
			  <p>Loading...</p>
			</div>

			<ul ng-repeat="evo in pokemonEvoChain" class="col-xs-4">
				
				<a ng-click="changePokemon(evo.species_name)">
					<li ng-if="evo.min_level == 1">
						<img ng-src="assets/pokemon/sprites/{{ getPokemonIdFromUrl(evo.species_url) }}.png"
						err-src="assets/images/noimage.png" />
						<strong>{{evo.species_name | capitalize}}</strong>
					</li>
				</a>
				
				<a ng-click="changePokemon(evo.species_name)">
					<li ng-if="evo.trigger_name">
						
						<img ng-src="assets/pokemon/sprites/{{ getPokemonIdFromUrl(evo.species_url) }}.png"
						err-src="assets/images/noimage.png" />
						<strong>{{ evo.species_name | capitalize }}</strong>

					<!-- if by level up -->
						<span ng-if="evo.trigger_name == 'level-up' ">
							<span ng-if="evo.min_level !== null ">lvl {{ evo.min_level }}</span>
							<!-- if levelup + weather -->
							<span ng-if="evo.overworld_rain">Rain</span>
						</span>
						
						<!-- if bytrade -->
						<span ng-if="evo.trigger_name == 'trade' ">Trade
							<!-- if level + trade-->
							<span ng-if="evo.min_level !== null ">lvl {{ evo.min_level }}</span>
							<!-- if held item + trade -->
							<span ng-if="evo.held_item !== null ">w/ {{ evo.held_item.name | capitalize }}</span>
						</span>
						
						<!-- if by item -->
						<span ng-if="evo.trigger_name == 'use-item' ">{{evo.item.name | dehyphen | capitalize}}
							<span ng-if="evo.min_level !== null ">lvl {{ evo.min_level }}</span>
						</span>
						
						<!-- if by happiness -->
						<span ng-if="evo.happiness != null ">Happiness</span>
					</li>
				</a>
			</ul>
	</section>

	<section id="type-effectiveness" class="col-xs-12">
		<h3>{{ pokemon.name | capitalize}}'s Type Offenses</h3>
		
		<div ng-repeat="type in typeEffectiveness">
			<h4 class="type {{type.name | lowercase}}">{{ type.name }}:</h4>
			<ul ng-if="type.immunes.length">
				<p>No damage against:</p>
				<li class="type {{i | lowercase}}" ng-repeat="i in type.immunes">{{ i }}</li>
			</ul>
			<ul ng-if="type.weaknesses">
				<p>Not very effective against:</p>
				<li class="type {{i | lowercase}}" ng-repeat="i in type.weaknesses">{{ i }}</li>
			</ul>
			<ul ng-if="type.strengths">
				<p>Super-effective against:</p>
				<li class="type {{i | lowercase}}" ng-repeat="i in type.strengths">{{ i }}</li>
			</ul>
		</div>

	</section>

	<footer class="col-xs-12">
		All pokemon names and likenesses are copyright GameFreak, Pokemon Co., and Nintendo. Used without permission but under Fair Use 17 U.S. Code S 107.
	</footer>

</div>